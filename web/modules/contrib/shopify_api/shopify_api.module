<?php
/**
 * @file
 * Main module file for the Shopify API.
 */

/**
 * Create a Shopify API client class.
 *
 * @return Shopify\Client
 *   A ShopifyClient class if all connection settings are present, otherwise
 *   NULL.
 */
function shopify_api_client() {
  if (!_shopify_api_has_valid_config()) {
    return NULL;
  }
  $config = \Drupal::config('shopify_api.settings');
  return new Shopify\PrivateApp($config->get('domain'), $config->get('api_key'), $config->get('password'), $config->get('shared_secret'));
}

/**
 * Determines if the Shopify client has all available config options.
 *
 * @return bool
 *   Returns FALSE if required Shopify variables are not set.
 */
function _shopify_api_has_valid_config() {
  $config = \Drupal::config('shopify_api.settings');
  return $config->get('api_key') && $config->get('domain') && $config->get('password') && $config->get('shared_secret');
}
